<?xml version="1.0" encoding="UTF-8"?>
<f:view xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:w="http://www.apusic.com/jsf/widget" xmlns:layout="http://www.apusic.com/jsf/layout"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:ajax="http://www.apusic.com/jsf/ajax" xmlns:om="http://www.apusic.com/jsf/misc"
	renderKitId="AJAX">
	<w:head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel="shortcut icon" href="#{constantBean.contextPath}/favicon.ico" />
		<link rel="icon" type="image/gif" href="#{constantBean.contextPath}/favicon.ico" />
	
		<script type="text/javascript" src="/scp/_global/resource/ext/src/locale/ext-lang.js?#{commonBean.lang}"></script>
		<script type="text/javascript" src="/scp/_global/resource/om/locale/om-lang.js?#{commonBean.lang}"></script>
	</w:head>
	<w:page loadMask="true" loadMaskText="Loading..." title="#{constantBean.headTitle}--#{l.m['单位编辑']}">
		<ajax:conversationActivator/>

		<layout:borderLayout fit="true" fitToBody="true">
			<layout:panel  id="masterEditPanel" height="300" region="north" fit="true" split="true">
				<w:form>
					<w:toolBar>
						<w:button id="refresh" value="#{l.m['刷新']}"
							image="#{constantBean.contextPath}/images/new.png" />
						<w:button id="save" value="#{l.m['保存']}"
							image="#{constantBean.contextPath}/images/save.png" />
					</w:toolBar>
					
					<layout:panelGrid columns="2" cellspacing="0" cellpadding="0"  style="font-size:12px">
						<layout:cell colspan="1">
							<layout:panelGrid columns="6" cellspacing="1" cellpadding="1"  style="font-size:12px">
								<h:outputLabel value="#{l.m['代码']}"  style="color: red"/>
								<w:textField selectOnFocus="true"
									value="#{pages.sysmgr.company.companyeditBean.selectedRowData.code}" width="250" maxLength="50"
									cls="under_line" focusClass="surround" />
								<h:outputLabel value="#{l.m['简称']}"  style="color: red"/>
								<w:textField selectOnFocus="true"
									value="#{pages.sysmgr.company.companyeditBean.selectedRowData.abbr}" width="250" maxLength="50"
									cls="under_line" focusClass="surround" />
								<layout:cell colspan="2">
									<layout:panelGrid columns="6" cellspacing="1"  cellpadding="1"  style="font-size:12px">
										<h:outputLabel value="#{l.m['代码缩写']}" style="color: red"/>
										<w:textField selectOnFocus="true" required="true" 
											value="#{pages.sysmgr.company.companyeditBean.selectedRowData.abbcode}" width="60" maxLength="2"
											/>
										<h:outputLabel value="#{l.m['本位币']}" />
										<w:combo emptyText="" typeAhead="true" required="true" width="60"
											value="#{pages.sysmgr.company.companyeditBean.selectedRowData.basecurrency}"
											forceSelection="true">
											<f:selectItems value="#{comboxBean.currency}" />
										</w:combo>
									</layout:panelGrid>
								</layout:cell>
								
								
								<h:outputLabel value="#{l.m['中文名']}"  style="color: red"/>
								<w:textArea selectOnFocus="true"
									value="#{pages.sysmgr.company.companyeditBean.selectedRowData.namec}" width="250"
									cls="under_line" focusClass="surround" />
									
								<h:outputLabel value="#{l.m['地址(中文)']}"  style="color: red"/>
								<w:textArea selectOnFocus="true"
									value="#{pages.sysmgr.company.companyeditBean.selectedRowData.addressc}" width="250"
									maxLength="50" cls="under_line" focusClass="surround" />
									
								<h:outputLabel value="#{l.m['电话1']}" />
								<w:textField selectOnFocus="true"
									value="#{pages.sysmgr.company.companyeditBean.selectedRowData.tel1}" width="200" maxLength="50"
									cls="under_line" focusClass="surround" />
								
								<h:outputLabel value="#{l.m['英文名']}"  style="color: red"/>
								<w:textArea selectOnFocus="true"
									value="#{pages.sysmgr.company.companyeditBean.selectedRowData.namee}" width="250"
									cls="under_line" focusClass="surround" />
									
								<h:outputLabel value="#{l.m['地址(英文)']}" style="color: red" />
								<w:textArea selectOnFocus="true"
									value="#{pages.sysmgr.company.companyeditBean.selectedRowData.addresse}" width="250"
									cls="under_line" focusClass="surround" />
									
								<h:outputLabel value="#{l.m['电话2']}" />
								<w:textField selectOnFocus="true"
									value="#{pages.sysmgr.company.companyeditBean.selectedRowData.tel2}" width="200" maxLength="50"
									cls="under_line" focusClass="surround" />
								
								
								
								
								<h:outputLabel value="#{l.m['传真1']}" />
								<w:textField selectOnFocus="true"
									value="#{pages.sysmgr.company.companyeditBean.selectedRowData.fax1}" width="250" maxLength="50"
									cls="under_line" focusClass="surround" />
									
								<h:outputLabel value="E-mail1" />
								<w:textField selectOnFocus="true"
									value="#{pages.sysmgr.company.companyeditBean.selectedRowData.email1}" width="250" maxLength="50"
									cls="under_line" focusClass="surround" />
									
								<h:outputLabel value="#{l.m['主页']}" />
								<w:textField selectOnFocus="true"
									value="#{pages.sysmgr.company.companyeditBean.selectedRowData.homepage}" width="200"
									maxLength="50" cls="under_line" focusClass="surround" />
								
								
								
								
								<h:outputLabel value="#{l.m['传真2']}" />
								<w:textField selectOnFocus="true"
									value="#{pages.sysmgr.company.companyeditBean.selectedRowData.fax2}" width="250" maxLength="50"
									cls="under_line" focusClass="surround" />
		
								<h:outputLabel value="E-mail2" />
								<w:textField selectOnFocus="true"
									value="#{pages.sysmgr.company.companyeditBean.selectedRowData.email2}" width="250" maxLength="50"
									cls="under_line" focusClass="surround" />
								<layout:cell colspan="2">	
									<layout:panelGrid columns="3" cellspacing="1" cellpadding="1"  style="font-size:12px">
										<w:checkBox boxLabel="#{l.m['独立核算 ']}"
													value="#{pages.sysmgr.company.companyeditBean.selectedRowData.isactset}"></w:checkBox>
													
										<h:outputLabel value="#{l.m['入账公司']}" />
										<w:combo emptyText="" typeAhead="true" width="115" listWidth="260"
											value="#{pages.sysmgr.company.companyeditBean.selectedRowData.corpidlink}"
											forceSelection="true">
											<f:selectItems value="#{comboxBean.company}" />
										</w:combo>
									</layout:panelGrid>
								</layout:cell>
							</layout:panelGrid>		
						</layout:cell>
						
						
						<layout:cell colspan="1">
							<layout:panelGrid columns="2" cellspacing="1" cellpadding="1"  style="font-size:12px">
								<w:checkBox boxLabel="#{l.m['船公司 ']}"
											value="#{pages.sysmgr.company.companyeditBean.selectedRowData.iscarrier}"></w:checkBox>
								<w:checkBox boxLabel="#{l.m['航空公司']}"
											value="#{pages.sysmgr.company.companyeditBean.selectedRowData.isairline}"></w:checkBox>
								<w:checkBox boxLabel="#{l.m['铁运']}"
											value="#{pages.sysmgr.company.companyeditBean.selectedRowData.istrain}"></w:checkBox>
								<w:checkBox boxLabel="#{l.m['订舱代理 ']}"
											value="#{pages.sysmgr.company.companyeditBean.selectedRowData.isagent}"></w:checkBox>
								<w:checkBox boxLabel="#{l.m['仓储客户']}"
											value="#{pages.sysmgr.company.companyeditBean.selectedRowData.iswarehouse}"></w:checkBox>
								<w:checkBox boxLabel="#{l.m['海运']}"
											value="#{pages.sysmgr.company.companyeditBean.selectedRowData.isfcl}"></w:checkBox>
								<w:checkBox boxLabel="#{l.m['空运']}"
											value="#{pages.sysmgr.company.companyeditBean.selectedRowData.isair}"></w:checkBox>
								<w:checkBox boxLabel="#{l.m['报关行 ']}"
											value="#{pages.sysmgr.company.companyeditBean.selectedRowData.iscustom}"></w:checkBox>
								<w:checkBox boxLabel="#{l.m['协作单位']}"
											value="#{pages.sysmgr.company.companyeditBean.selectedRowData.iscooperative}"></w:checkBox>	
								<w:checkBox boxLabel="#{l.m['拖车公司 ']}"
											value="#{pages.sysmgr.company.companyeditBean.selectedRowData.istruck}"></w:checkBox>
								<w:checkBox boxLabel="#{l.m['清关公司']}"
											value="#{pages.sysmgr.company.companyeditBean.selectedRowData.isclc}"></w:checkBox>
								<w:checkBox boxLabel="#{l.m['目的港代理']}"
											value="#{pages.sysmgr.company.companyeditBean.selectedRowData.isagentdes}"></w:checkBox>	
							</layout:panelGrid>
						</layout:cell>
						
					</layout:panelGrid>
					<layout:panelGrid columns="6" cellspacing="1" cellpadding="1"  style="font-size:12px">
						<h:outputLabel value="#{l.m['备注']}" />
						<w:textField selectOnFocus="true"
							value="#{pages.sysmgr.company.companyeditBean.selectedRowData.remarks}" width="250"
							maxLength="50" height="35" />
						<h:outputLabel value="#{l.m['发票抬头']}" />	
						<w:textArea selectOnFocus="true" height="30"
									value="#{pages.sysmgr.company.companyeditBean.selectedRowData.invoicetitle}" width="200" focusClass="surround" />
						<h:outputLabel value="#{l.m['统一社会信用代码']}" />
						<w:textField selectOnFocus="true" width="200"
									value="#{pages.sysmgr.company.companyeditBean.selectedRowData.socialcreditno}" focusClass="surround" />
						<h:outputLabel value="#{l.m['业务员']}" />
						<w:combo value="#{pages.sysmgr.company.companyeditBean.selectedRowData.salesid}" width="120"
									forceSelection="true" selectOnFocus="true">
							<f:selectItems value="#{comboxBean.sales}" />
						</w:combo>
						<h:outputLabel value="#{l.m['MZC编码']}" />
						<w:textField selectOnFocus="true" width="200" id = "mzccode" focusClass="surround" />
						<h:outputLabel value="#{l.m['辅助编码']}" />
						<w:textField selectOnFocus="true" width="200"
									value="#{pages.sysmgr.company.companyeditBean.selectedRowData.helpcode}" focusClass="surround" />
					</layout:panelGrid>
					
				</w:form>
			</layout:panel>
				
			
			<layout:panel id="gridPanel" jsvar="gridPanelJsvar" height="100%" split="true" fit="true"
				title="" hideBorders="true" region="center">
				<ajax:submitAction id="showDept" jsvar="showDept" />
				<ajax:submitAction id="showAttachmentIframe" jsvar="showAttachmentIframe" />
				<layout:tabLayout height="600" width="500" activeTab="0" fit="true">
					<layout:panel title="#{l.m['部门']}"
						style="height: 100% ; width: 100%" onactivate="showDept.submit()">
						<w:iframe id="deptIframe" style="border: thin;width: 100%;height: 100%" border="0">
						</w:iframe>
					</layout:panel>
					
					<layout:panel title="#{l.m['附件']}"
						style="height: 100% ; width: 100%" onactivate="showAttachmentIframe.submit()">
						<w:iframe id="attachmentIframe" style="border: thin;width: 100%;height: 100%" border="0"
							scrolling="false">
						</w:iframe>
					</layout:panel>
				</layout:tabLayout>
			</layout:panel>
			
		</layout:borderLayout>
	</w:page>
	
	<script>
	 //<![CDATA[

	function culAmount(){
        	var pieceVal = piece.getValue();
        	var priceVal = price.getValue();
        	var amountVal = amount.getValue();
        	
        	if(pieceVal==null||pieceVal==''){
        		pieceVal = 0;
        	}
        	if(priceVal==null||priceVal==''){
        		priceVal = 0;
        	}
        	if(amountVal==null||amountVal==''){
        		amountVal = 0;
        	}
        	var amountVal = pieceVal*priceVal;
        	amount.setValue(amountVal);
        }

	function resize(){
		
	}

	Ext.onReady(function(){
		resize();
		Ext.EventManager.onWindowResize(function(){
			resize();
		});
	 });

	function exportExcel() {
    	var config = qryGridJsvar.getSelectionModel().grid.events.columnmove.obj.plugins[0].grid.colModel.config;
    	var key = "";
    	var value = "";
    	for(var i=1;i<config.length;i++) {
    		if(!config[i].hidden) {
    			key += config[i].dataIndex;
        		value += config[i].header;
        		if(i < config.length - 1) {
        			key += ",";
        			value += ",";
        		}
    		}
    	}
    	exportexl.addParam("key",key);
    	exportexl.addParam("value",value);
    	exportexl.submit();
    }        
	 //]]>	
	</script>
</f:view>