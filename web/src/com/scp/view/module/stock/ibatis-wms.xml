<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap>
	<select id="pages.module.stock.warehouseinBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT row_number() OVER() AS row,* FROM(
		SELECT * FROM(
		select
		  id 
		 ,nos
		 ,refno
		 ,customerabbr
		 ,customerno
		 ,warehouseid
		 ,singtime
		 ,inputer
		 ,inputtime
		 ,isubmit
		 ,submiter,submitime
		 ,ischeck
		 ,checkter
		 ,checktime
		 ,updater
		 ,updatetime
		 ,split_part(warehousedesc ,'/', 2) AS warehousedesc
		 ,split_part(polwarehousedesc ,'/', 2) AS polwarehousedesc
		 ,cntno
		 ,intime
		 ,(SELECT namec||'/'||namee||'/'||COALESCE((SELECT name FROM sys_department WHERE id = x.deptid),'') FROM sys_user x WHERE id = t.saleid) saleuser
		 ,sodate
		 ,agentname
		 ,factory
		 ,cntid
		 ,ewd
		 ,sono
		 ,(SELECT channel FROM dat_channel WHERE isdelete = false AND id = t.channelid) AS channel
		 ,(SELECT namec FROM dat_port WHERE isdelete = false AND isbarge = TRUE and namee = t.poa limit 1) AS poa
		 ,(SELECT COALESCE(sum(piece),0) FROM wms_indtl WHERE inid = t.id AND isdelete = FALSE) AS piece
		 ,(SELECT string_agg(DISTINCT packagee,f_newline()) FROM wms_indtl WHERE inid = t.id AND isdelete = FALSE) AS packagees
		 ,(SELECT COALESCE(sum(wgttotle),0) FROM wms_indtl WHERE inid = t.id AND isdelete = FALSE)::NUMERIC(18,3) AS wgttotle
		 ,(SELECT COALESCE(sum(cbmtotle),0) FROM wms_indtl WHERE inid = t.id AND isdelete = FALSE)::NUMERIC(18,3) AS cbmtotle
		 ,(SELECT string_agg(DISTINCT goodsnamec,f_newline()) FROM wms_indtl WHERE inid = t.id AND isdelete = FALSE) AS goodsnamecs
		 ,(SELECT string_agg(DISTINCT goodsnamee,f_newline()) FROM wms_indtl WHERE inid = t.id AND isdelete = FALSE) AS goodsnamees
		 ,(SELECT string_agg(DISTINCT markno,f_newline()) FROM wms_indtl WHERE inid = t.id AND isdelete = FALSE) AS marknos
		 ,remark
		 ,nationaldate
		 ,lclwmsdate
		 ,gdsintype
		 ,agentcnt
		 ,export
		 ,traindate
		 ,trainno
		 ,customerid
		 ,saleid
		 ,warehouseid
		 ,polwarehouseid
		 ,pol
		 ,pdd
		 ,pod
		 ,destination
		 ,COALESCE(sovol,0) AS sovol
		 ,(SELECT namec FROM dat_line WHERE isdelete = FALSE AND code = t.lines) AS lines
		 ,remarkunusual
		 ,customerno
		 ,customtype 
		 ,custominfo
		 ,istaxret
		 ,(SELECT to_char(dd.loadtime,'yyyy-mm-dd') FROM del_load dd, wms_indtl wid, del_loadtl dl, wms_outdtlref wo WHERE wid.id = wo.indtlid AND t.id = wid.inid AND dl.outdtlid = wo.outdtlid  AND dl.loadid = dd.id AND dd.isdelete = FALSE AND wid.isdelete = FALSE AND dl.isdelete = FALSE limit 1) AS loadtime
		FROM _wms_in t 
		WHERE 
			$qry$ 
			$dynamicClauseWhere$ 
			AND isdelete = FALSE
			AND wmstype IN ('I','G','C','P')
		$ordersql$			 
		LIMIT $limit$ OFFSET $start$) AS T
		) AS TT
	</select>
	<select id="pages.module.stock.warehouseinBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM _wms_in t 
		WHERE 
			$qry$  
		    $dynamicClauseWhere$ 
			AND wmstype IN ('I','G','C','P')
			AND isdelete = FALSE
	</select>
	
	<select id="pages.module.stock.containerdetailBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 t.*
		FROM bus_packlist t 
		WHERE $qry$ 
	   ORDER BY t.id
	</select>
	<select id="pages.module.stock.containerdetailBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(1) AS counts 
		FROM bus_packlist t 
		WHERE $qry$
	</select>
	
	
	<select id="pages.module.stock.wmsineditBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 COALESCE(cbmtotle,0) AS cbmtotle
		 ,COALESCE(wgttotle,0) AS wgttotle
		 ,COALESCE(piece,0) AS piece
		 ,chargeweight
		 ,volwgt
		 ,*
		FROM _wms_indtl t 
		WHERE $qry$ 
			AND isdelete = FALSE
			  
		ORDER BY id
		<!-- 为了批量更新储位的时候id与数据库id一一对应 -->
		LIMIT $limit$ OFFSET $start$
	</select>
	<select id="pages.module.stock.wmsineditBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM _wms_indtl t 
		WHERE $qry$ 
			AND isdelete = FALSE
	</select>
	
	<select id="pages.module.stock.warehouseincheckBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT row_number() OVER() AS row,* FROM(
		SELECT * FROM(
		select
		  id 
		 ,nos
		 ,refno
		 ,customerabbr
		 ,customerno
		 ,warehouseid
		 ,singtime
		 ,isubmit
		 ,submiter
		 ,isreturn
		 ,submitime,ischeck,checkter
		 ,checktime,inputer,inputtime
		 ,updater,updatetime
		 ,(SELECT isconfirm_cc FROM fina_jobs WHERE isdelete = FALSE AND id = t.jobid) AS isconfirm_cc
		 ,(SELECT confirm_cc_user FROM fina_jobs WHERE isdelete = FALSE AND id = t.jobid) AS confirm_cc_user
		 ,(SELECT confirm_cc_time FROM fina_jobs WHERE isdelete = FALSE AND id = t.jobid) AS confirm_cc_time
		 ,split_part(warehousedesc ,'/', 2) AS warehousedesc
		 ,split_part(polwarehousedesc ,'/', 2) AS polwarehousedesc
		 ,cntno
		 ,intime
		 ,(SELECT namec||'/'||namee||'/'||COALESCE((SELECT name FROM sys_department WHERE id = x.deptid),'') FROM sys_user x WHERE id = t.saleid) saleuser
		 ,sodate
		 ,agentname
		 ,factory
		 ,cntid
		 ,ewd
		 ,sono
		 ,(SELECT namec FROM dat_port WHERE isdelete = false AND isbarge = TRUE and namee = t.poa limit 1) AS poa
		 ,(SELECT COALESCE(sum(piece),0) FROM wms_indtl WHERE inid = t.id AND isdelete = FALSE) AS piece
		 ,(SELECT string_agg(DISTINCT packagee,f_newline()) FROM wms_indtl WHERE inid = t.id AND isdelete = FALSE) AS packagees
		 ,(SELECT COALESCE(sum(wgttotle),0) FROM wms_indtl WHERE inid = t.id AND isdelete = FALSE) AS wgttotle
		 ,(SELECT COALESCE(sum(cbmtotle),0) FROM wms_indtl WHERE inid = t.id AND isdelete = FALSE) AS cbmtotle
		 ,(SELECT string_agg(DISTINCT goodsnamec,f_newline()) FROM wms_indtl WHERE inid = t.id AND isdelete = FALSE) AS goodsnamecs
		 ,(SELECT string_agg(DISTINCT goodsnamee,f_newline()) FROM wms_indtl WHERE inid = t.id AND isdelete = FALSE) AS goodsnamees
		 ,(SELECT string_agg(DISTINCT markno,f_newline()) FROM wms_indtl WHERE inid = t.id AND isdelete = FALSE) AS marknos
		 ,remark
		 ,agentcnt
		 ,export
		 ,traindate
		 ,trainno
		 ,customerid
		 ,saleid
		 ,warehouseid
		 ,polwarehouseid
		 ,pol
		 ,pdd
		 ,pod
		 ,destination
		 ,nationaldate
		 ,lclwmsdate
		 ,gdsintype
		 ,COALESCE(sovol,0) AS sovol
		 ,(SELECT namec FROM dat_line WHERE isdelete = FALSE AND code = t.lines) AS lines
		 ,remarkunusual
		 ,COALESCE(loadgoodsrequire,'') AS loadgoodsrequire
		 ,customerno
		 ,customtype
		 ,custominfo
		 ,(select customvotes from wms_in where id =t.id) as customvotes
		 ,(SELECT channel FROM dat_channel WHERE isdelete = false AND id = t.channelid) AS channel
		 ,(SELECT to_char(dd.loadtime,'yyyy-mm-dd') FROM del_load dd, wms_indtl wid, del_loadtl dl, wms_outdtlref wo WHERE wid.id = wo.indtlid AND t.id = wid.inid AND dl.outdtlid = wo.outdtlid  AND dl.loadid = dd.id AND dd.isdelete = FALSE AND wid.isdelete = FALSE AND dl.isdelete = FALSE limit 1) AS loadtime		 
		FROM _wms_in t 
		WHERE $qry$ 
			 $dynamicClauseWhere$ 
			AND isdelete = FALSE
			AND isubmit = TRUE
			
			AND (wmstype = 'I' OR  wmstype = 'G' OR  wmstype = 'C' OR wmstype = 'P')
			<!-- ORDER BY id DESC --> 
		$ordersql$	
		LIMIT $limit$ OFFSET $start$) AS T
		) AS TT
	</select>
	<select id="pages.module.stock.warehouseincheckBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM _wms_in t 
		WHERE $qry$ 
			 $dynamicClauseWhere$ 
			AND (wmstype = 'I' OR  wmstype = 'G' OR  wmstype = 'C' OR wmstype = 'P')
			AND isdelete = FALSE
			AND isubmit = TRUE
	</select>
	
	
	<select id="pages.module.stock.wmsincheckeditBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select  
		 COALESCE(wgttotle,0) As wgttotle
		 ,COALESCE(cbmtotle,0) As cbmtotle
		 ,COALESCE(piece,0) As piece
		 ,*
		FROM _wms_indtl t 
		WHERE $qry$ 
			AND isdelete = FALSE
			
		ORDER BY id 
	</select>
	<select id="pages.module.stock.wmsincheckeditBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM _wms_indtl t 
		WHERE $qry$ 
			AND isdelete = FALSE
			
	</select>
	
	<select id="pages.module.stock.warehouseoutBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 id
		 ,islocal
		 ,nos
		 ,customerabbr
		 ,warehouseid
		 ,singtime
		 ,isubmit
		 ,submiter
		 ,submitime
		 ,ischeck
		 ,checkter
		 ,checktime
		 ,inputer
		 ,inputtime
		 ,updater,updatetime
		 ,warehousedesc
		 ,(SELECT channel FROM dat_channel WHERE isdelete = false AND id = t.channelid) AS channel
		 ,(SELECT refno FROM wms_out WHERE isdelete = FALSE AND id = t.id) AS refno
		 ,(SELECT outime FROM wms_out WHERE isdelete = FALSE AND id = t.id) AS outime
		 ,(SELECT string_agg(DISTINCT markno,f_newline()) FROM wms_outdtl WHERE outid = t.id AND isdelete = FALSE) AS marknos
		FROM _wms_out t 
		WHERE $qry$ 
			AND isdelete = FALSE
				AND (wmstype = 'O' OR wmstype = 'L' OR  wmstype = 'P')
			ORDER BY inputtime DESC 
		LIMIT $limit$ OFFSET $start$
	</select>
	<select id="pages.module.stock.warehouseoutBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM _wms_out t 
		WHERE $qry$ 
			AND isdelete = FALSE
				AND (wmstype = 'O' OR wmstype = 'L' OR  wmstype = 'P')
	</select>
	
	
	<select id="pages.module.stock.wmsouteditBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 * 
		FROM _wms_outdtl t 
		WHERE $qry$ 
			AND isdelete = FALSE
		ORDER BY id
	</select>
	<select id="pages.module.stock.wmsouteditBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM _wms_outdtl t 
		WHERE $qry$ 
			AND isdelete = FALSE
	</select>
	
	<select id="pages.module.stock.warehouseoutcheckBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select
		  id 
		 ,islocal
		 ,nos,customerabbr,warehouseid
		 ,id,singtime
		 ,isubmit
		 ,submiter
		 ,submitime
		 ,ischeck
		 ,checkter
		 ,checktime
		 ,inputer
		 ,inputtime
		 ,updater
		 ,updatetime
		 ,(SELECT channel FROM dat_channel WHERE isdelete = false AND id = t.channelid) AS channel
		 ,(SELECT isconfirm_cc FROM fina_jobs WHERE isdelete = FALSE AND id = t.jobid) AS isconfirm_cc
		 ,(SELECT confirm_cc_user FROM fina_jobs WHERE isdelete = FALSE AND id = t.jobid) AS confirm_cc_user
		 ,(SELECT confirm_cc_time FROM fina_jobs WHERE isdelete = FALSE AND id = t.jobid) AS confirm_cc_time
		 ,warehousedesc
		 ,(SELECT refno FROM wms_out WHERE isdelete = FALSE AND id = t.id) AS refno 
		 ,(SELECT outime FROM wms_out WHERE isdelete = FALSE AND id = t.id) AS outime 
		 ,(SELECT string_agg(DISTINCT markno,f_newline()) FROM wms_outdtl WHERE outid = t.id AND isdelete = FALSE) AS marknos
		FROM _wms_out t 
		WHERE $qry$ 
			AND (wmstype = 'O' OR wmstype = 'L' OR  wmstype = 'P')
			AND isdelete = FALSE
			AND isubmit = TRUE
			ORDER BY checktime DESC 
		LIMIT $limit$ OFFSET $start$
	</select>
	<select id="pages.module.stock.warehouseoutcheckBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM _wms_out t 
		WHERE $qry$
			AND (wmstype = 'O' OR wmstype = 'L' OR wmstype = 'P')
			AND isdelete = FALSE
			AND isubmit = TRUE
	</select>
	
	
	<select id="pages.module.stock.wmsoutcheckeditBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 * 
		FROM _wms_outdtl t 
		WHERE $qry$ 
			AND isdelete = FALSE
		ORDER BY inputtime DESC ,goodscode
	</select>
	<select id="pages.module.stock.wmsoutcheckeditBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM _wms_outdtl t 
		WHERE $qry$ 
			AND isdelete = FALSE
			
	</select>
	
	
	<select id="pages.module.stock.stockBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT 
		(select REPLACE(f_lists(DISTINCT(f_findwmslocaldesc(id,NULL,'S'))),',',f_newline())  )AS stockdesc
			,goodscode , customerid , goodsnamec , sum(piece) AS piecenum ,markno,goodssize ,customerabbr ,warehousedesc ,warehouseid,goodscolor,pieceinbox
			,CAST(sum(piece)/(CASE WHEN pieceinbox = 0 THEN 1 ELSE pieceinbox END) AS NUMERIC(18,0)) as stockbox 
			,min(nationaldate) as nationaldate
			,SUM((CAST((piece)/(CASE WHEN pieceinbox = 0 THEN 1 ELSE pieceinbox END) AS NUMERIC(18,0)) * gdscbm)) AS cbmtotal
			,SUM((CAST((piece)/(CASE WHEN pieceinbox = 0 THEN 1 ELSE pieceinbox END) AS NUMERIC(18,0)) * gdswgt)) AS wgttotal
			,channel
			,remarkin
		FROM $tbl$ l
		WHERE $qry$ 
		GROUP BY goodscode , customerid , goodsnamec,markno,goodssize ,customerabbr ,warehousedesc ,warehouseid,goodscolor ,pieceinbox,channel,remarkin
		HAVING (1=$flag$ or sum(piece) >0)
		ORDER BY warehousedesc ,customerabbr,channel,min(nationaldate),markno
		LIMIT $limit$ OFFSET $start$
	</select>
	<select id="pages.module.stock.stockBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT count(*) AS counts FROM(
		SELECT 
			1
		FROM $tbl$ 
		WHERE $qry$ 
		GROUP BY goodscode , customerid , goodsnamec,markno,goodssize ,customerabbr ,warehousedesc ,warehouseid,goodscolor ,pieceinbox,channel,remarkin
		HAVING (1=$flag$ or sum(piece) >0)
		) AS M
	</select>
	
	
	<select id="pages.module.stock.wmsstockchooserBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT 
			goodscode , customerid , goodsnamec , sum(piece) AS piecenum ,markno,goodssize ,goodscolor,warehouseid,pieceinbox,customerabbr
			,CAST(sum(piece)/pieceinbox AS NUMERIC(18,0)) as stockbox ,min(intime) as intime
		FROM _wms_stock
		WHERE $qry$ 
		GROUP BY goodscode,customerid,goodsnamec,markno,goodssize,warehouseid,goodscolor ,pieceinbox,customerabbr
		having sum(piece)>0
		and $qryIntime$ 
		ORDER BY intime ,goodscode
		
	</select>
	<select id="pages.module.stock.wmsstockchooserBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT COUNT(*) AS counts FROM(
		SELECT 
			1
		FROM _wms_stock
		WHERE $qry$ 
		GROUP BY goodscode,customerid,goodsnamec,markno,goodssize,warehouseid,goodscolor ,pieceinbox,customerabbr
		having sum(piece)>0
		and $qryIntime$ 
		ORDER BY goodscode ,goodsnamec) AS m
		
	</select>
	
	
	<select id="pages.module.stock.wmspricemgrBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT 
			*
		FROM _wms_price
		WHERE $qry$ 
		ORDER BY timetype DESC , timeend desc
		LIMIT $limit$ OFFSET $start$
	</select>
	<select id="pages.module.stock.wmspricemgrBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT 
			count(*) AS counts 
		FROM _wms_price
		WHERE $qry$ 
		
	</select>
	
	
	<select id="pages.module.stock.wmspricegroupmgrBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT 
			*
		FROM _wms_price_group
		WHERE $qry$ 
		
		
	</select>
	<select id="pages.module.stock.wmspricegroupmgrBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT 
			count(*) AS counts 
		FROM _wms_price_group
		WHERE $qry$ 
		
	</select>
	
	<select id="pages.module.stock.customerchooseBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT 
			*
		FROM sys_corporation c
		WHERE $qry$ 
		 AND c.iswarehouse = true
		 	AND c.iscustomer = 'Y'
		 		AND c.isdelete = false
		
		
	</select>
	<select id="pages.module.stock.customerchooseBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT 
			count(*) AS counts 
		FROM sys_corporation c
		WHERE $qry$ 
		  AND c.iswarehouse = true
		  	AND c.iscustomer = 'Y'
		  		AND c.isdelete = false
	</select>
	
	<select id="pages.module.stock.wmsinitBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 * 
		FROM _wms_in t 
		WHERE $qry$ 
			AND isdelete = FALSE
				AND wmstype = 'Z'
			ORDER BY nos ,customerabbr
		LIMIT $limit$ OFFSET $start$
	</select>
	<select id="pages.module.stock.wmsinitBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM _wms_in t 
		WHERE $qry$ 
			AND wmstype = 'Z'
				AND isdelete = FALSE
	</select>
	
	
	<select id="pages.module.stock.wmsiniteditBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 * 
		FROM _wms_indtl t 
		WHERE $qry$ 
			AND isdelete = FALSE
			  
		ORDER BY id
		<!-- 为了批量更新储位的时候id与数据库id一一对应 -->
		LIMIT $limit$ OFFSET $start$
	</select>
	<select id="pages.module.stock.wmsiniteditBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM _wms_indtl t 
		WHERE $qry$ 
			AND isdelete = FALSE
	</select>
	
	
	<select id="pages.module.stock.wmscarryoverBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 * 
		FROM _wms_out t 
		WHERE $qry$ 
			AND isdelete = FALSE
				AND wmstype = 'C'
			ORDER BY inputtime DESC 
		LIMIT $limit$ OFFSET $start$
	</select>
	<select id="pages.module.stock.wmscarryoverBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM _wms_out t 
		WHERE $qry$ 
			AND isdelete = FALSE
				AND wmstype = 'C'
	</select>
	
	
	<select id="pages.module.stock.wmscarryovereditBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 * 
		FROM _wms_outdtl t 
		WHERE $qry$ 
			AND isdelete = FALSE
		ORDER BY inputtime DESC ,goodscode
	</select>
	<select id="pages.module.stock.wmscarryovereditBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM _wms_outdtl t 
		WHERE $qry$ 
			AND isdelete = FALSE
	</select>
	
	
	
	<select id="pages.module.stock.warehousecarryoverchooseBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 * 
		FROM  _dat_warehouse t 
		WHERE $qry$ 
			AND isdelete = FALSE
		
	</select>
	<select id="pages.module.stock.warehousecarryoverchooseBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
			select 
		 count(*) AS counts 
		FROM _dat_warehouse t 
		WHERE $qry$ 
			AND isdelete = FALSE
	</select>
	
	
	<select id="pages.module.stock.wmsreportBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 * 
		FROM  sys_report t 
		WHERE $qry$ 
		AND modcode = 'stock'
			
		
	</select>
	<select id="pages.module.stock.wmsreportBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
			select 
		 count(*) AS counts 
		FROM sys_report t 
		WHERE $qry$
		AND modcode = 'stock' 
			
	</select>
	
	<select id="pages.module.stock.wmsstockcheckBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 * 
		FROM  _wms_dispatch t 
		WHERE $qry$ 
		AND isdelete = FALSE
			ORDER BY nos
		LIMIT $limit$ OFFSET $start$	
		
	</select>
	<select id="pages.module.stock.wmsstockcheckBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
			select 
		 count(*) AS counts 
		FROM _wms_dispatch t 
		
		WHERE $qry$ 
		AND isdelete = FALSE
			
	</select>
	
	
	<select id="pages.module.stock.wmsstockcheckdtlBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 * 
		FROM  _wms_dispatchdtl t 
		WHERE $qry$
		AND isdelete = FALSE 
		ORDER BY pieceadd,piececut,goodscode
		LIMIT $limit$ OFFSET $start$	
	</select>
	<select id="pages.module.stock.wmsstockcheckdtlBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
			select 
		 count(*) AS counts 
		FROM _wms_dispatchdtl t 
		WHERE $qry$ 
		AND isdelete = FALSE 
			
	</select>
	
	
	<select id="pages.module.stock.wmsstockcheckchooserBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT 
			goodscode , customerid , goodsnamec , sum(piece) AS piecenum ,markno,goodssize ,goodscolor,warehouseid,pieceinbox
			,CAST(sum(piece)/pieceinbox AS NUMERIC(18,0)) as stockbox ,min(checktime) as intime
		FROM _wms_stock_history
		WHERE $qry$ 
		GROUP BY goodscode,customerid,goodsnamec,markno,goodssize,warehouseid,goodscolor ,pieceinbox
		ORDER BY intime ,goodscode
		
	</select>
	<select id="pages.module.stock.wmsstockcheckchooserBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT count(*) AS counts FROM(
		SELECT 
			1
		FROM _wms_stock_history
		WHERE $qry$ 
		GROUP BY goodscode,customerid,goodsnamec,markno,goodssize,warehouseid,goodscolor ,pieceinbox
		ORDER BY goodscode ,goodsnamec)AS m
		
	</select>
	
	<select id="pages.module.stock.wmsbarcodeBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 t.*
		FROM bus_barcode t 
		WHERE $qry$
	</select>
	<select id="pages.module.stock.wmsbarcodeBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(1) AS counts 
		FROM bus_barcode t 
		WHERE $qry$
	</select>
	
	<select id="pages.module.stock.wmstransBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 t.*
		 ,(select namec from dat_warehouse where id = t.warehouseid_out) AS warehouseout
		 ,(select namec from dat_warehouse where id = t.warehouseid_in) AS warehousein
		FROM wms_trans t 
		WHERE $qry$
		AND isdelete = FALSE
	</select>
	<select id="pages.module.stock.wmstransBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(1) AS counts 
		FROM wms_trans t 
		WHERE $qry$
		AND isdelete = FALSE
	</select>
	
	<select id="pages.module.stock.wmstranseditBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 * 
		 ,(select abbr from sys_corporation where isdelete = false and id = t.customerid) AS customerabbr
		FROM wms_transdtl t 
		WHERE $qry$ 
			AND isdelete = FALSE
		ORDER BY id
	</select>
	<select id="pages.module.stock.wmstranseditBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM wms_transdtl t 
		WHERE $qry$ 
			AND isdelete = FALSE
	</select>
	
	
	<select id="pages.module.stock.wmstranscheckBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 t.*
		 ,(select namec from dat_warehouse where id = t.warehouseid_out) AS warehouseout
		 ,(select namec from dat_warehouse where id = t.warehouseid_in) AS warehousein
		FROM wms_trans t 
		WHERE $qry$
		AND isdelete = FALSE
		AND isubmit = TRUE
	</select>
	<select id="pages.module.stock.wmstranscheckBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(1) AS counts 
		FROM wms_trans t 
		WHERE $qry$
		AND isdelete = FALSE
		AND isubmit = TRUE
	</select>
	
	
	<select id="pages.module.stock.wmstranscheckeditBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 * 
		FROM wms_transdtl t 
		WHERE $qry$ 
			AND isdelete = FALSE
		ORDER BY id
	</select>
	<select id="pages.module.stock.wmstranscheckeditBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM wms_transdtl t 
		WHERE $qry$ 
			AND isdelete = FALSE
	</select>
	
	<select id="pages.module.stock.wmsineditBean.bookgrid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
	<![CDATA[
		SELECT DISTINCT	t.id,prefix,code ,r.datefm , t.namec
			FROM sys_busnodesc t ,sys_busnorule r 
			WHERE $qry$
			AND t.id = r.busnotypeid 
			AND code like 'wms_in%'
			AND t.isdelete = FALSE AND r.isdelete = FALSE
		order by t.namec,r.datefm, prefix
	]]>
	</select>
	<select id="pages.module.stock.wmsineditBean.bookgrid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 10000 AS counts 
	</select>
	
	
	<select id="pages.module.stock.popqrygridBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap" remapResults="true">
		select 
		 * 
		FROM $table$ t 
		WHERE $qry$ 
			$filter$
		ORDER BY code
	</select>
	<select id="pages.module.stock.popqrygridBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap" remapResults="true">
		select 
		 count(*) AS counts 
		FROM $table$ t 
		WHERE $qry$ 
			$filter$
	</select>
</sqlMap>



