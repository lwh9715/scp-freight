<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap>

	<select id="pages.module.other.feejobseditBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
	<![CDATA[
		SELECT DISTINCT	t.id,prefix,code ,r.datefm , t.namec
			FROM sys_busnodesc t ,sys_busnorule r 
			WHERE $qry$
			AND t.id = r.busnotypeid 
			AND code like 'fina_jobs%'
			AND t.isdelete = FALSE AND r.isdelete = FALSE
		order by t.namec,r.datefm, prefix
	]]>
	</select>
	<select id="pages.module.other.feejobseditBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 10000 AS counts 
	</select>


	<select id="pages.module.other.feejobsBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 * 
		 ,(SELECT abbr FROM sys_corporation WHERE id = t.corpidop AND isdelete = FALSE) AS opcompany
		 ,(SELECT abbr FROM sys_corporation WHERE id = t.corpid AND isdelete = FALSE) AS company
		 ,(SELECT namec FROM dat_filedata AS d WHERE d.isleaf = TRUE AND d.isdelete = false AND d.fkcode = 80 AND d.code = t.tradeway) AS tradewaynamec
		 ,(SELECT namec FROM dat_filedata AS d WHERE d.isleaf = TRUE AND d.isdelete = false AND d.fkcode = 170 AND d.code = t.impexp) AS impexpnamec
		FROM _fina_jobs t 
		WHERE $qry$
		$filter$
		$corpfilter$
		AND jobtype = 'Z' 
		ORDER BY jobdate desc
		LIMIT $limit$ OFFSET $start$;
	</select>
	<select id="pages.module.other.feejobsBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM _fina_jobs t 
		WHERE $qry$ 
		$filter$
		$corpfilter$
		AND jobtype = 'Z' 
	</select>
	
	
	<select id="pages.module.other.feetemplateBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 * 
		 ,(SELECT COALESCE(x.code,'') ||'/'|| COALESCE(x.abbr,'') FROM sys_corporation x WHERE t.corpid = x.id AND x.iscustomer=false) AS corpiddesc
		 ,COALESCE((SELECT x.namec FROM sys_user x where x.code = t.inputer and x.isdelete = false limit 1),t.inputer) AS inputername
		 ,COALESCE((SELECT x.namec FROM sys_user x where x.code = t.updater and x.isdelete = false limit 1),t.updater) AS updatername
		FROM fina_arap_templet t 
		WHERE $qry$
		$filter$
		AND isdelete = false
		ORDER BY $orderby$ namec
		LIMIT $limit$ OFFSET $start$
	</select>
	<select id="pages.module.other.feetemplateBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM fina_arap_templet t 
		WHERE $qry$ 
		$filter$
		AND isdelete = false
	</select>
	
	
	<select id="pages.module.other.feetemplateditBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 * 
			,COALESCE((SELECT x.namec FROM sys_user x where x.code = t.inputer and x.isdelete = false limit 1),t.inputer) AS inputername
		 	,COALESCE((SELECT x.namec FROM sys_user x where x.code = t.updater and x.isdelete = false limit 1),t.updater) AS updatername
		FROM _fina_arap_tempdtl t 
		WHERE $qry$
			AND isdelete = false
		ORDER BY araptype , customerid, inputtime
		LIMIT $limit$ OFFSET $start$;
	</select>
	<select id="pages.module.other.feetemplateditBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM _fina_arap_tempdtl t 
		WHERE $qry$ 
			AND isdelete = false
	</select>
	
	
	
	
	<select id="pages.module.other.feetemplatechooserBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 * 
			,COALESCE((SELECT x.namec FROM sys_user x where x.code = t.inputer and x.isdelete = false limit 1),t.inputer) AS inputername
		 	,COALESCE((SELECT x.namec FROM sys_user x where x.code = t.updater and x.isdelete = false limit 1),t.updater) AS updatername
		FROM fina_arap_templet t 
		WHERE $qry$
		$filter$
		AND isdelete = false
		ORDER BY $orderby$ namec
		LIMIT $limit$ OFFSET $start$;
	</select>
	<select id="pages.module.other.feetemplatechooserBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM fina_arap_templet t 
		WHERE $qry$ 
		$filter$
		AND isdelete = false
	</select>
	
	
	<select id="pages.module.other.feetemplatechooserBean.gridtl.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 * 
			,COALESCE((SELECT x.namec FROM sys_user x where x.code = t.inputer and x.isdelete = false limit 1),t.inputer) AS inputername
		 	,COALESCE((SELECT x.namec FROM sys_user x where x.code = t.updater and x.isdelete = false limit 1),t.updater) AS updatername
		FROM _fina_arap_tempdtl t 
		WHERE $qry$
		$filter$
		AND isdelete = false
		ORDER BY araptype , customerid, inputtime
		LIMIT $limit$ OFFSET $start$;
	</select>
	<select id="pages.module.other.feetemplatechooserBean.gridtl.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM _fina_arap_tempdtl t 
		WHERE $qry$ 
		$filter$
		AND isdelete = false
	</select>
	
	
	<select id="pages.module.other.arapchooserBean.grid.page"
		parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT
			*
		FROM _fina_arap t
		WHERE $qry$
			$filter$
			AND t.isdelete = FALSE
			AND t.rptype !='H'
			AND t.agenbillid IS NULL
		ORDER BY jobno,araptype , customerid , feeitemid , currency
		LIMIT $limit$ OFFSET $start$;
	</select>
	<select id="pages.module.other.arapchooserBean.grid.count"
		parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT
			COUNT(*) AS counts
		FROM _fina_arap t
		WHERE $qry$
			$filter$
			AND t.isdelete = FALSE
			AND t.rptype !='H'
			AND t.agenbillid IS NULL
	</select>
	
	<select id="pages.module.other.sendemailBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT 
		 * 
		FROM _addresslist t 
		WHERE $qry$ 
		ORDER BY adrtype desc, code
		LIMIT $limit$ OFFSET $start$;
	</select>
	<select id="pages.module.other.sendemailBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT 
		 count(*) AS counts 
		FROM _addresslist t 
		WHERE $qry$
	</select>
	<select id="pages.module.other.sendemailBean.gridHisEmail.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT 
		 * 
		FROM sys_email t 
		WHERE $qry$ 
		AND issent = TRUE
		ORDER BY senttime DESC
		LIMIT $limit$ OFFSET $start$;
	</select>
	<select id="pages.module.other.sendemailBean.gridHisEmail.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		SELECT 
		 count(*) AS counts 
		FROM sys_email t 
		WHERE $qry$
		AND issent = TRUE
	</select>
</sqlMap>
