<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap>
	<select id="pages.module.cs.csbookingListBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
			SELECT 
				(SELECT namec||'/'||namee||'/'||COALESCE((SELECT name FROM sys_department WHERE id = x.deptid),'') FROM sys_user x WHERE code = o.receivedder) AS receivedderinfo
				,o.*
  			FROM _cs_booking o 
  			WHERE $qry$
  				$corpfilter$
 				ORDER BY COALESCE(inputtime,(NOW()+'-1 year')) DESC , nos DESC
 				LIMIT $limit$ OFFSET $start$
	</select>
	<select id="pages.module.cs.csbookingListBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM _cs_booking o 
			WHERE $qry$
			$corpfilter$
	</select>	
	<select id="pages.module.cs.csbookingfeeBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
			SELECT 
				o.*
  			FROM cs_booking_fee o 
  			WHERE $qry$
  				ORDER BY araptype DESC,ppcc DESC,currency DESC,cntype DESC
	</select>
	<select id="pages.module.cs.csbookingfeeBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM cs_booking_fee o 
		WHERE $qry$
	</select>	
	<select id="pages.module.cs.csbookingdtlBean.grid.page" parameterClass="java.util.Map" resultClass="java.util.HashMap">
			SELECT 
				o.*
  			FROM cs_booking_dtl o 
  			WHERE $qry$
  				ORDER BY cntype DESC
	</select>
	<select id="pages.module.cs.csbookingdtlBean.grid.count" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		select 
		 count(*) AS counts 
		FROM cs_booking_dtl o 
		WHERE $qry$
	</select>	
</sqlMap>
