<?xml version="1.0" encoding="UTF-8"?>
<f:view xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:w="http://www.apusic.com/jsf/widget" xmlns:layout="http://www.apusic.com/jsf/layout"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:ajax="http://www.apusic.com/jsf/ajax" xmlns:om="http://www.apusic.com/jsf/misc"
	renderKitId="AJAX">
	<w:head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<w:stylesheet src="/common/css/common.css"></w:stylesheet><link rel="stylesheet" id="cmsbg" type="text/css"/>
		<w:script src="/common/js/common.js?t=4"></w:script>
		<script type="text/javascript" src="/scp/common/js/savemodel2.js?t=5"></script>
		<script type="text/javascript" src="/scp/common/js/jquery-2.0.0.min.js"></script>
		<!-- 自定义列表排序 -->
		<w:stylesheet src="/common/css/list-style.css"></w:stylesheet>
		<script type="text/javascript" src="/scp/common/js/jquery-ui.js"></script>
		<script type="text/javascript" src="/scp/common/js/savemodel-list.js"></script>

		<link rel="stylesheet" type="text/css" href="/scp/common/css/jquery.flexbox.css" />
		<script type="text/javascript" src="/scp/common/js/jquery.flexbox.js"></script>
		<script src="../../../common/js/chart.js"></script>
		<script type="text/javascript" src="/scp/_global/resource/ext/src/locale/ext-lang.js?#{commonBean.lang}"></script>
		<script type="text/javascript" src="/scp/_global/resource/om/locale/om-lang.js?#{commonBean.lang}"></script>
		<style>
div.taba span.x-tab-strip-text {
	width: 181px;
	text-align: center;
	text-shadow: gray;
	font-size: 15px;
	font-weight: bold;
}

div.tabb span.x-tab-strip-text {
	width: 77px;
	text-align: center;
}

.tabIconFCL {
	background:
		url("#{constantBean.contextPath}/images/refresh.png");
}
</style>
	</w:head>
	<w:page loadMask="true" loadMaskText="Loading..." title="#{l.m['运价查询']} FCL">
		<ajax:conversationActivator/>
		<layout:panel jsvar="gridPanelJsvar" id="gridPanel">
		<div style="height: 0px;"><ui:include src="/common/gridpage.xhtml"/></div>
			<w:form>
				<layout:panelGrid columns="4" style="font-size: 12px;" cellpadding="0" cellspacing="0">
					<layout:cell colspan="2" >
						<layout:panelGrid columns="4" cellpadding="0" cellspacing="0">
							<h:outputLabel value="#{l.m['起运港']}" style="color: red"/>
							<layout:cell>
								<layout:panelGrid columns="2" cellpadding="0" cellspacing="0">
									<div id="fclpol"></div>
									<w:textField selectOnFocus="true" width="45" id="pol" jsvar="polJsvar"
											value="#{pages.module.price.qryfclBean.pol}" hidden="true">
									</w:textField>

									<!--<w:combo  width="120" listWidth="300" onselect="setbargepol()" jsvar="polJsvar"
										value="#{pages.module.price.qryfclBean.pol}">
										<f:selectItems value="#{pages.module.price.qryfclBean.qryPol}" />
									</w:combo>
									--><!-- <w:combo width="60" id="isqryPol">
										<f:selectItem itemLabel="#{l.m['包含']}" itemValue="Y"/>
										<f:selectItem itemLabel="#{l.m['不包含']}" itemValue="N"/>
									</w:combo> -->
								</layout:panelGrid>
							</layout:cell>
							<h:outputLabel value="#{l.m['目的港']}" style="color: red"/>
							<layout:cell>
								<layout:panelGrid columns="2" cellpadding="0" cellspacing="0">
								<div id="fclpod"></div>
								<w:textField selectOnFocus="true" width="45" id="pod" jsvar="podJsvar"
										value="#{pages.module.price.qryfclBean.pod}" hidden="true">
								</w:textField>
								<!--<w:combo width="120" listWidth="300"  forceSelection="true"
									value="#{pages.module.price.qryfclBean.pod}" jsvar="podJsvar">
									<f:selectItems value="#{pages.module.price.qryfclBean.qryPod}" />
								</w:combo>
								-->
								</layout:panelGrid>
							</layout:cell>


							<h:outputLabel value="#{l.m['船公司']}" />
							<w:combo width="120"
								value="#{pages.module.price.qryfclBean.qryMap['shipping']}">
								<f:selectItems value="#{pages.module.price.qryfclBean.qryCar}" />
							</w:combo>

							<h:outputLabel value="#{l.m['航线']}" />
							<w:combo width="120"
								value="#{pages.module.price.qryfclBean.qryMap['line']}" forceSelection="true"
								listWidth="160">
								<f:selectItems value="#{pages.module.price.qryfclBean.qryLine}" />
							</w:combo>
							<h:outputLabel value="#{l.m['航线代码']}" />
							<layout:cell>
								<layout:panelGrid columns="2">
									<w:combo  id="qryshipline" width="80"  forceSelection="false" listWidth="100">
										<f:selectItems value="#{pages.module.price.mgrfclBean.qryLinecode}" />
									</w:combo>
									<w:combo width="60" id="isshipline">
										<f:selectItem itemLabel="#{l.m['包含']}" itemValue="Y"/>
										<f:selectItem itemLabel="#{l.m['不包含']}" itemValue="N"/>
									</w:combo>
								</layout:panelGrid>
							</layout:cell>
							<h:outputLabel value="#{l.m['分公司']}"/>
							<w:combo typeAhead="true" readOnly="false" forceSelection="true" width="120"
								listWidth="200" id="qrycorpid">
								<f:selectItems value="#{comboxBean.company}" />
							</w:combo>
							<h:outputLabel value="#{l.m['运价管理人']}"/>
							<layout:cell colspan="1">
								<div id="priceuser"></div>
								<w:textField selectOnFocus="true" width="150"
								value="#{pages.module.price.qryfclBean.priceuser}" id="priceuser" jsvar="priceuseridJs" hidden="true"/>
							</layout:cell>
							<h:outputLabel value="#{l.m['运价类型']}"/>
							<w:combo typeAhead="true" readOnly="false" forceSelection="true" width="120"
								listWidth="200" id="pricetype">
								<f:selectItem itemLabel="FAK" itemValue="FAK" />
								<f:selectItem itemLabel="NAC" itemValue="NAC" />
								<f:selectItem itemLabel="SPOT" itemValue="SPOT" />
								<f:selectItem itemLabel="ONLINE" itemValue="ONLINE" />
							</w:combo>
						</layout:panelGrid>
					</layout:cell>
					<layout:cell colspan="2">
						<w:checkBox boxLabel="#{l.m['查看历史']}" oncheck="showHistory()" id="isShowHistory" jsvar="isShowHistoryJsVar"></w:checkBox>
						<layout:panelGrid columns="8" cellpadding="0" cellspacing="0" id="historyPanel" style="visibility:hidden;">
							<h:outputLabel value="#{l.m['有效日期起']}" />
							<w:combo width="50" id="datetypefm" forceSelection="true">
								<f:selectItem itemLabel=">=" itemValue=">="/>
								<f:selectItem itemLabel=">" itemValue=">"/>
								<f:selectItem itemLabel="=" itemValue="="/>
								<f:selectItem itemLabel="!=" itemValue="!="/>
							</w:combo>
							<w:dateField selectOnFocus="true" width="90" id = "datefm"/>

							<h:outputLabel value="#{l.m['有效日期止']}" />
							<w:combo width="50" id="datetypeto" forceSelection="true">
								<f:selectItem itemLabel="&lt;=" itemValue="&lt;="/>
								<f:selectItem itemLabel="&lt;" itemValue="&lt;"/>
								<f:selectItem itemLabel="=" itemValue="="/>
								<f:selectItem itemLabel="!=" itemValue="!="/>
							</w:combo>
							<w:dateField selectOnFocus="true" width="90" id = "dateto" />

							<h:outputLabel value="#{l.m['收货地']}" style="display: none;"/>
							<w:combo  width="90" listWidth="300" hidden="true"
								value="#{pages.module.price.qryfclBean.bargepol}">
								<f:selectItems value="#{comboxBean.bargepol}" />
							</w:combo>
						</layout:panelGrid>
					</layout:cell>
					<layout:cell colspan="2">
						<layout:panelGrid columns="11" cellpadding="0" cellspacing="0">
							<w:button id="qryRefresh" value="#{l.m['查询']}" onclick="return checkBefore()"
								image="#{constantBean.contextPath}/images/query-small.png" jsvar="qryRefreshJs"/>
							<w:button id="clearQryKey" label="#{l.m['清空条件']}" width="25"
									image="#{constantBean.contextPath}/images/clear.png" />
							<w:button id="createOrder" jsvar="createOrderJsVar" label="#{l.m['生成订单']}" width="25" onclick="return checkBefore()"
									image="#{constantBean.contextPath}/images/new.png" />
							<w:button id="showCreateJobs" label="#{l.m['生成工作单']}" width="25" onclick="return checkBefore1()"
									image="#{constantBean.contextPath}/images/new.png" />

							<w:button id="showCreatePriceJobs" label="#{l.m['生成报价单']}" width="25" onclick="return checkBefore2()"
									image="#{constantBean.contextPath}/images/new.png" />
							<w:button label="#{l.m['保存定制']}" onclick="saveColModelFun(gridJsvar,'pages.module.price.qryfclBean.grid');"
									image="#{constantBean.contextPath}/images/save.png" />
							<w:button label="#{l.m['还原定制']}" onclick="saveColModelFunDefault('pages.module.price.qryfclBean.grid');"
									image="#{constantBean.contextPath}/images/return-small.png" />
							<w:button id="selectColumn" value="#{l.m['选择栏目']}" onclick="columnWindowFunction();"
									image="#{constantBean.contextPath}/images/shezhi.png" />
							<w:button id="opennewwin" value="#{l.m['新窗口打开']}" onclick="opennewwinf()"
								image="#{constantBean.contextPath}/images/new.png" />
							<w:button value="#{l.m['导出']}" onclick="exportExcel();"
								image="#{constantBean.contextPath}/pages/module/common/resources/images/excel.gif" />
							<w:button id="openPrice" value="#{l.m['询盘']}"
								image="#{constantBean.contextPath}/images/new.png" />

						</layout:panelGrid>
					</layout:cell>

					<layout:cell>
						<ajax:status startStyle="color: red"
							onstart="document.getElementsByTagName('body').item(0).style.cursor='progress'"
							onstop="document.getElementsByTagName('body').item(0).style.cursor='auto'">
							<f:facet name="start">
								<f:verbatim>
									<img src="#{constantBean.contextPath}/images/waiting.gif" style="height: 15px;width:20px;"></img>
								</f:verbatim>
							</f:facet>
						</ajax:status>
					</layout:cell>
				</layout:panelGrid>


				<div style="height: 0px; display: none;">
				<ajax:submitAction id="showSurExt" jsvar="showSurExt" />
				<ajax:submitAction id="export" jsvar="exportexl" />
				<ajax:submitAction id="linkEdit" jsvar="linkEdit" />
				<ajax:submitAction id="showChartsWindow" jsvar="showChartsWindow" />
				<ajax:submitAction id="saveGridUserDef" jsvar="saveGridUserDef" />
				<ajax:submitAction id="saveGridUserDefSetDefault" jsvar="saveGridUserDefSetDefault" />
				<ajax:submitAction id="columnRefresh" jsvar="columnRefresh" />
				<ajax:submitAction id="setbargepolajax" jsvar="setbargepolajax" />
				<ajax:submitAction id="sortGridRemote" jsvar="sortGridRemoteJsVar" />
				</div>
				<div style="height: 0px; display: none;">
						<w:button id="simulateExport" jsvar="simulateExport" label="#{l.m['导出']}" title="#{l.m['下载']}" disabled="true" alwaysSubmit="true" />
						<om:fileDownload id="doSimulateExport" for="simulateExport" savedName="qryfcllist.xls" />
					</div>

				<w:dataGrid paged="false" id="grid" jsvar="gridJsvar" toolBarPosition="bottom" idColumn="uuid" selectable="true"
						loadMask="true" onrowselect="return false" onrowdeselect="return false" summaryRowPosition="inner"
						 rows="10000" multiSelectOnClick="false" remoteSort="true" >
					<w:outputColumn id="id" header="ID" hidden="true" />
					<w:outputColumn id="uuid" header="UUID" hidden="true" />
					<w:outputColumn header="#{l.m['明细']}"  width="40" sortable="true"
						clientFormatter="formatLinkEdit" />
					<w:outputColumn header="#{l.m['主推']}" id="ispush" width="52" sortable="true" style="float:left;"  hidden="false"  wrap="true" clientFormatter="formatcolor"/>
					<w:outputColumn header="#{l.m['驳船港']}" id="bargepol" width="80" sortable="true"/>
					<w:outputColumn header="#{l.m['起运港']}" id="pol" width="100" sortable="true"  hidden="false"  wrap="true"/>
					<w:outputColumn header="#{l.m['目的港']}" id="pod" width="100" sortable="true"  hidden="false"  wrap="true"/>

					<w:outputColumn header="#{l.m['船公司']}" id="shipping" width="50" sortable="true"  wrap="true"/>
					<w:outputColumn header="#{l.m['运价类型']}" id="pricetype" width="40" sortable="true"></w:outputColumn>
				<w:outputColumn header="#{l.m['币制']}" id="currency" width="50" sortable="true" />
				<w:outputColumn header="20'GP" id="cost20" width="60" sortable="true" align="right" clientFormatter="setstyle" hidden="false"/>
					<w:outputColumn header="40'GP" id="cost40gp" width="60" sortable="true" align="right"  clientFormatter="setstyle" hidden="false"/>
					<w:outputColumn header="40'HQ" id="cost40hq" width="60" sortable="true" align="right"  clientFormatter="setstyle" hidden="false"/>
					<w:outputColumn header="45'HQ" id="cost45hq" width="60" sortable="true" align="right"  clientFormatter="setstyle" hidden="false"/>
					<w:outputColumn header="#{l.m['驳船费']}20'GP" id="barcost20" width="80" sortable="true"/>
					<w:outputColumn header="#{l.m['驳船费']}40'GP" id="barcost40gp" width="80" sortable="true"/>
					<w:outputColumn header="#{l.m['驳船费']}40'HQ" id="barcost40hq" width="80" sortable="true"/>
				<w:outputColumn header="#{l.m['开始类型']}" id="typestart" width="60" sortable="true"  align="left" clientFormatter="formateType" wrap="true"/>
				<w:outputColumn header="#{l.m['有效日期起']}" id="datefm" width="80" sortable="true" clientFormatter="formateValid">
					<f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8" />
				</w:outputColumn>
				<w:outputColumn header="#{l.m['有效日期止']}" id="dateto" width="80" sortable="true" clientFormatter="formateValid">
					<f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8" />
				</w:outputColumn>
				<w:outputColumn header="#{l.m['船名']}" id="vessel" width="50" sortable="true"  wrap="true"/>
				<w:outputColumn header="#{l.m['船期']}" id="schedule" width="50" sortable="true" align="left"/>
				<w:outputColumn header="#{l.m['截关日期']}" id="closingtime" width="80" sortable="true" align="left"/>
				<w:outputColumn header="#{l.m['航程(天)']}" id="tt" width="60" sortable="true"  align="left"/>
				<w:outputColumn header="#{l.m['FREE TIME']}" id="freetime" width="30" sortable="true"/>
				<w:outputColumn header="#{l.m['外部备注']}" id="remark_in" width="380" sortable="true" align="left" clientFormatter="formatRemark"/>

				<w:outputColumn header="#{l.m['附加费']}" id="localcharge" width="60" sortable="true" align="center" clientFormatter="formatLocalcharge"/>
				<w:outputColumn header="#{l.m['航线']}" id="line" width="40" sortable="true"  align="left">
				</w:outputColumn>
				<w:outputColumn header="#{l.m['航线代码']}" id="shipline" width="60" sortable="true"  align="left">
				</w:outputColumn>
				<w:outputColumn header="#{l.m['结束类型']}" id="typeend" width="160" sortable="true"  align="left" clientFormatter="formateTypeend"/>
					<w:outputColumn header="#{l.m['其他']}" id="piececntypeo" width="60" sortable="true" align="right"/>

					
					<w:outputColumn header="#{l.m['驳船费备注']}" id="barremark" width="120" sortable="true" clientFormatter="formatRemark"  hidden="true"/>
					<w:outputColumn header="bargeid" id="bargeid" width="80" sortable="true" hidden="true"/>
					<w:outputColumn header="#{l.m['中转港']}" id="via" width="70" sortable="true"  align="left"/>


					<w:outputColumn header="#{l.m['走势']}" width="50" clientFormatter="formatLinkCharts" />


					<w:outputColumn header="#{l.m['国家']}" id="country" width="70" sortable="true"  align="left"/>
					<w:outputColumn header="#{l.m['名称']}" id="pricename" width="180" sortable="true"  align="left"/>
					<w:outputColumn header="#{l.m['运价管理人']}" id="priceuserids" width="180" sortable="true"  align="left"/>

					<w:outputColumn header="#{l.m['订舱备注']}" id="remark_out" width="120" sortable="true" align="left" clientFormatter="formatRemark"/>
					<w:outputColumn header="#{l.m['限重']}" id="remark_ship" width="120" sortable="true" clientFormatter="formatRemark"/>


					<!--<w:outputColumn header="CLS" id="cls" width="90" sortable="true"  align="center"/>
					<w:outputColumn header="ETD" id="etd" width="90" sortable="true"  align="center"/>
					-->
					<w:outputColumn header="#{l.m['发布时间']}" id="daterelease" width="90" sortable="true"  >
						<f:convertDateTime pattern="yy/MM/dd" timeZone="GMT+8" />
					</w:outputColumn>

					<w:outputColumn header="#{l.m['驳船有效期起']}" id="bargedatefm" width="90" sortable="true" clientFormatter="formateValid">
						<f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8" />
					</w:outputColumn>
					<w:outputColumn header="#{l.m['驳船有效期止']}" id="bargedateto" width="90" sortable="true" clientFormatter="formateValid">
						<f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8" />
					</w:outputColumn>

					<w:outputColumn header="#{l.m['录入人']}" id="inputername" sortable="true" width="80"/>
					<w:outputColumn header="#{l.m['录入时间']}" id="inputtime" width="90" sortable="true">
						<f:convertDateTime pattern="yy/MM/dd HH:mm" timeZone="GMT+8" />
					</w:outputColumn>
					<w:outputColumn header="#{l.m['修改人']}" id="updatername" sortable="true" width="80"/>
					<w:outputColumn header="#{l.m['修改时间']}" id="updatetime" width="90" sortable="true">
						<f:convertDateTime pattern="yy/MM/dd HH:mm" timeZone="GMT+8" />
					</w:outputColumn>



					<w:outputColumn id="isvalid" header="isvalid" hidden="true" />
					<w:outputColumn id="typestart2" header="typestart2" hidden="true" />
					<w:outputColumn id="typeend2" header="typeend2" hidden="true" />
					<w:outputColumn id="bartypestart2" header="bartypestart2" hidden="true" />
					<w:outputColumn id="bartypeend2" header="bartypeend2" hidden="true" />
				</w:dataGrid>
				<w:textArea id="json" hidden="true" jsvar="jsonJs"></w:textArea>
				<w:textField selectOnFocus="true" id="actionJsText" jsvar="actionJsTextJsVar" hidden="true"/>
			</w:form>
		</layout:panel>
	</w:page>


	<layout:window id="editWindow" width="760" height="660" maximizable="true" minimizable="true"
		jsvar="showEditWindowJsVar" title="#{l.m['明细']}" constrainHeader="true" border="false"
		resizable="true" x="100" y="136">
			<layout:panel id="editPanel">
				<w:form>
				<layout:panelGrid>
					<!--<w:button id="setDetails" value="#{l.m['附件']}"></w:button>-->
					<w:button id="close" value="#{l.m['关闭']}" ></w:button>
				</layout:panelGrid>
				<layout:panelGrid>
					<layout:cell align="center">
						<layout:panelGrid columns="8" cellpadding="0" cellspacing="0">
							<h:outputLabel value="#{l.m['航线']}" />
							<w:textField selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.line}" readOnly="true" width="120"/>
							<h:outputLabel value="#{l.m['航线代码']}" />
							<w:textField selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.shipline}" readOnly="true" width="120"/>
							<h:outputLabel value="#{l.m['有效日期']}" />
							<w:dateField width="120" selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.datefm}" readOnly="true"></w:dateField>
							<h:outputLabel value="~" />
							<w:dateField width="120" selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.dateto}" readOnly="true"></w:dateField>

							<h:outputLabel value="#{l.m['起运港']}" />
							<w:textField  selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.pol}" readOnly="true" width="120"/>
							<h:outputLabel value="#{l.m['目的港']}" />
							<w:textField  selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.pod}" readOnly="true" width="120"/>
							<h:outputLabel value="#{l.m['国家']}" />
							<w:textField  selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.country}" readOnly="true" width="120"></w:textField>
							<h:outputLabel value="#{l.m['中转港']}" />
							<w:textField  selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.via}" readOnly="true" width="120"></w:textField>

							<h:outputLabel value="#{l.m['船期']}" />
							<w:textField   selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.schedule}" readOnly="true" width="120"/>
							<h:outputLabel value="#{l.m['航程']}" />
							<w:textField  selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.tt}" readOnly="true" width="120"/>
							<h:outputLabel value="#{l.m['船公司']}" />
							<w:textField  selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.shipping}" readOnly="true" width="120"/>
							<h:outputLabel value="#{l.m['船名']}"/>
							<w:textField width="120" value="#{pages.module.price.qryfclBean.selectedRowData.vessel}"/>
							<h:outputLabel value="#{l.m['截关日期']}" />
							<w:dateField width="120" value="#{pages.module.price.qryfclBean.selectedRowData.closingtime}"/>
							<h:outputLabel value="#{l.m['开航日']}" />
							<w:dateField width="120" selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.etd}" readOnly="true"/>

							<h:outputLabel value="#{l.m['开始类型']}" />
							<w:combo typeAhead="true" width="140" listWidth="200" value="#{pages.module.price.qryfclBean.selectedRowData.typestart}">
								<f:selectItem itemLabel="#{l.m['大船截关']}" itemValue="CLS" />
								<f:selectItem itemLabel="#{l.m['大船驳船']}ON BOARD" itemValue="BETD" />
								<f:selectItem itemLabel="#{l.m['大船']}ON BOARD" itemValue="ETD" />
								<f:selectItem itemLabel="#{l.m['驳船']}ON BOARD" itemValue="BCETD" />
								<f:selectItem itemLabel="#{l.m['提单']}ON BOARD" itemValue="TDETD" />
							</w:combo>

							<h:outputLabel value="#{l.m['结束类型']}" />
							<w:combo typeAhead="true" width="140" listWidth="200" value="#{pages.module.price.qryfclBean.selectedRowData.typeend}">
								<f:selectItem itemLabel="#{l.m['大船截关']}" itemValue="CLS" />
								<f:selectItem itemLabel="#{l.m['大船驳船']}ON BOARD" itemValue="BETD" />
								<f:selectItem itemLabel="#{l.m['大船']}ON BOARD" itemValue="ETD" />
								<f:selectItem itemLabel="#{l.m['驳船']}ON BOARD" itemValue="BCETD" />
								<f:selectItem itemLabel="#{l.m['提单']}ON BOARD" itemValue="TDETD" />
							</w:combo>

							<!--<h:outputLabel value="#{l.m['航线代码']}" />
							<w:textField   selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.shipline}" readOnly="true" width="120"/>
							--><h:outputLabel value="#{l.m['合约号']}"></h:outputLabel>
							<w:textField width="120" value="#{pages.module.price.qryfclBean.selectedRowData.contractno}"/>

							<h:outputLabel value="#{l.m['FREE TIME']}"/>
							<w:textField width="120" value="#{pages.module.price.qryfclBean.selectedRowData.freetime}"/>

						</layout:panelGrid>
					</layout:cell>
				</layout:panelGrid>

				<layout:panelGrid columns="6" width="760"  cellspacing="0" cellpadding="0">
					<layout:panelGrid columns="2" width="220" cellpadding="0" cellspacing="0">
						<h:outputLabel value="#{l.m['箱型']}" style="width: 140px;font-size: 16px;"/>
						<!--<layout:panelGrid columns="2" width="180"  cellspacing="0" cellpadding="0">
							<h:outputLabel value="#{l.m['运价类型']}"/>-->
						<h:outputLabel value="#{l.m['运价类型:']}#{pages.module.price.qryfclBean.selectedRowData.pricetype}#{l.m[' 成本价']}" style="width: 180px;font-size: 16px;"/>
							<!--
						</layout:panelGrid>
						<h:outputLabel value="#{l.m['成本价']}" style="width: 140px;font-size: 16px;"/>
						-->
						<h:outputLabel value="20'GP" style="width: 140px;font-size: 16px;"/>
						<w:numberField  selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.cost20}" allowNegative="false" style="text-align: right" readOnly="true"/>

						<h:outputLabel value="40'GP" style="width: 140px;font-size: 16px;"/>
						<w:numberField  selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.cost40gp}" allowNegative="false" style="text-align: right" readOnly="true"/>

						<h:outputLabel value="40'HQ" style="width: 140px;font-size: 16px;"/>
						<w:numberField  selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.cost40hq}" allowNegative="false" style="text-align: right" readOnly="true"/>
						<h:outputLabel value="45'HQ" style="width: 140px;font-size: 16px;"/>
						<w:numberField  selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.cost45hq}" allowNegative="false" style="text-align: right" readOnly="true"/>
						<w:combo typeAhead="true" forceSelection="true" width="55"
							value="#{pages.module.price.qryfclBean.selectedRowData.cntypeothercode}" focusClass="surround">
							<f:selectItems value="#{comboxBean.cntype}" />
						</w:combo>
						<w:numberField  selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.pieceother}"
							 allowNegative="false" style="text-align: right"/>
					</layout:panelGrid>

					<layout:panelGrid columns="2" width="180"  cellspacing="0" cellpadding="0">
						<h:outputLabel value="#{l.m['外部备注']}"/>
						<w:textArea style="width: 360px;height: 125px;margin-top: 25px;" selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.remark_in}" readOnly="true"/>
					</layout:panelGrid>
				</layout:panelGrid>

				<layout:panelGrid columns="2" width="760">
					<h:outputLabel value="#{l.m['限重']}"/>
					<w:textArea width="700" selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.remark_ship}" readOnly="true"/>
				</layout:panelGrid>

				<layout:panelGrid columns="1" width="760" >
					<!--<w:textArea width="725" selectOnFocus="true" readOnly="true" id = "feedesc" height="60"/>
				-->
					<w:iframe id="localChargeIframe" style="border: thin;width: 100%;height: 100%" border="0"
						scrolling="false">
					</w:iframe>

				</layout:panelGrid>

				<layout:panelGrid columns="2" width="760">
					<h:outputLabel value="#{l.m['附加费说明']}"/>
					<w:textArea width="660" selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.remark_fee}" readOnly="true"/>
				</layout:panelGrid>

				<layout:panelGrid columns="4" width="760" cellpadding="0" cellspacing="0">
					<h:outputLabel value="#{l.m['联系方式']}"/>
					<w:textArea width="250" selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.contacter}"  height="60" readOnly="true"/>
					<h:outputLabel value="#{l.m['订舱备注']}"/>
					<w:textArea width="250" selectOnFocus="true" value="#{pages.module.price.qryfclBean.selectedRowData.remark_out}"  height="60" readOnly="true"/>
				</layout:panelGrid>

				<w:textField selectOnFocus="true" id="pkVal" hidden="true" />
				</w:form>
				<w:outputColumn id="ispush" hidden="true" />
			</layout:panel>
	</layout:window>


	<layout:window maximizable="true" id="createOrderWindow" jsvar="createOrderWindowJsVar" width="1024" height="750" header="false" title="#{l.m['生成订单']}"
		constrainHeader="true" modal="true">
		<w:iframe id="orderIframe" style="border: thin;width: 100%;height: 100%" border="0"
			scrolling="false">
		</w:iframe>
	</layout:window>

	<layout:window id="chartsWindow" jsvar="chartsWindowJsVar" width="600" height="500" title="#{l.m['运价走势']}" constrainHeader="true" maximizable="true">
		<w:iframe id="chartsIframe" style="border: thin;width: 100%;height: 100%;" border="0"
			scrolling="false">
		</w:iframe>
	</layout:window>

	<layout:window id="tipsWindow" jsvar="tipsWindow" width="800" height="520" title="#{l.m['附加费']}" constrainHeader="true" constrain="true">
		<w:iframe id="tipsIFrame" name="tipsIFrame" style="border: thin;width: 100%;height: 100%;" border="0"
			scrolling="false">
		</w:iframe>
	</layout:window>

	<layout:window maximizable="false" id="columnWindow" jsvar="columnWindow" width="600" height="550"
		header="false" resizable="true" constrainHeader="true" title="#{l.m['选择栏目']}">
		<layout:panel id="" height="100%" hideBorders="true" width="100%" fit="true">
			<w:form>
				<w:toolBar>
					<h:outputLabel  value="#{l.m['查询：']}" />
					<w:textField jsvar="findValueJs" id="findValue">
					</w:textField>
					<w:button id="columnfind" label="" onclick="findColmn()"
						image="#{constantBean.contextPath}/images/query-small.png" />
				</w:toolBar>
				<layout:panelGrid columns="2">
					<div id="selectTitle" class="list-select">
						<div class="list-title">
							<h4>#{l.m['双击鼠标左键或选一项单击>添加']}</h4>
						</div>
						<span style="font-size:20px;margin-left:50px;">#{l.m['可选栏目']}</span><span style="margin-left:180px;font-size:20px">#{l.m['显示栏目']}</span>
						<div class="list-body">
							<div class="item-box left-box">
								<!-- 左边框初始化待选项 -->
							</div>
							<div class="center-box">
								<button class="add-one"  style="width:60px" title="#{l.m['添加选中项']}">&gt;</button>
								<button class="remove-one" style="width:60px" title="#{l.m['移除选中项']}">&lt;</button>
								<button class="add-all" style="width:60px" title="#{l.m['添加全部']}">&gt;&gt;</button>
								<button class="remove-all" style="width:60px" title="#{l.m['移除全部']}">&lt;&lt;</button>
								<button class="selected-val" style="width:60px" title="" value="#{l.m['确认']}">#{l.m['确认']}</button>
							</div>
							<div id="sortable" class="item-box right-box">
								<!-- 右边框存放已选项 -->
							</div>
						</div>
						<div class="list-footer">
							<button onclick="columnWindow.hide();" value="#{l.m['取消']}">#{l.m['取消']}</button>
						</div>
					</div>
				</layout:panelGrid>
			</w:form>
		</layout:panel>
	</layout:window>


	<layout:window id="createJobsWindow" width="455" height="500" maximizable="true" minimizable="true"
		jsvar="createJobsWindowJsVar" constrainHeader="true" border="false" modal="true"
		resizable="true">
			<layout:panel>
				<w:form>
				<layout:panelGrid columns="2">
					<h:outputLabel value="#{l.m['委托人']}" ></h:outputLabel>
					<layout:cell>
						<div id="customer" style="background-color: #FFFFC7;background-image:none;"></div>
						<w:textField width="70" id="customerid" jsvar="customeridJsVar" hidden="true"  alwaysSubmit="true" style="background-color: #FFFFC7;background-image:none;" />
					</layout:cell>

					<h:outputLabel value="20'GP" style="width: 140px;font-size: 16px;"/>
					<layout:cell>
						<layout:panelGrid columns="3">
							<w:button value="--" onclick="z20gpJsvar.setValue(z20gpJsvar.getValue()-1)"></w:button>
							<w:numberField id="z20gp" jsvar="z20gpJsvar" selectOnFocus="true"  allowNegative="false" style="text-align: right;background-color: #FFFFC7;background-image:none;" width="50"/>
							<w:button value="+" onclick="z20gpJsvar.setValue(z20gpJsvar.getValue()+1)"></w:button>
						</layout:panelGrid>
					</layout:cell>
					<h:outputLabel value="40'GP" style="width: 140px;font-size: 16px;"/>
					<layout:cell>
						<layout:panelGrid columns="3">
							<w:button value="--" onclick="z40gpJsvar.setValue(z40gpJsvar.getValue()-1)"></w:button>
							<w:numberField id="z40gp" jsvar="z40gpJsvar" selectOnFocus="true"  allowNegative="false" style="text-align: right;background-color: #FFFFC7;background-image:none;" width="50"/>
							<w:button value="+" onclick="z40gpJsvar.setValue(z40gpJsvar.getValue()+1)"></w:button>
						</layout:panelGrid>
					</layout:cell>
					<h:outputLabel value="40'HQ" style="width: 140px;font-size: 16px;"/>
					<layout:cell>
						<layout:panelGrid columns="3">
							<w:button value="--" onclick="z40hqJsvar.setValue(z40hqJsvar.getValue()-1)"></w:button>
							<w:numberField id="z40hq" jsvar="z40hqJsvar" selectOnFocus="true"  allowNegative="false" style="text-align: right;background-color: #FFFFC7;background-image:none;" width="50"/>
							<w:button value="+" onclick="z40hqJsvar.setValue(z40hqJsvar.getValue()+1)"></w:button>
						</layout:panelGrid>
					</layout:cell>
					<h:outputLabel value="45'HQ" style="width: 140px;font-size: 16px;"/>
					<layout:cell>
						<layout:panelGrid columns="3">
							<w:button value="--" onclick="z45hqJsvar.setValue(z45hqJsvar.getValue()-1)"></w:button>
							<w:numberField id="z45hq" jsvar="z45hqJsvar" selectOnFocus="true"  allowNegative="false" style="text-align: right;background-color: #FFFFC7;background-image:none;" width="50"/>
							<w:button value="+" onclick="z45hqJsvar.setValue(z45hqJsvar.getValue()+1)"></w:button>
						</layout:panelGrid>
					</layout:cell>
					<w:combo typeAhead="true" forceSelection="true" width="55" id="cntypeothercodev" jsvar="cntypeothercodevJsvar" emptyText="#{l.m['其他']}"
						focusClass="surround">
						<f:selectItems value="#{comboxBean.cntype}" />
					</w:combo>
					<layout:cell>
						<layout:panelGrid columns="3">
							<w:button value="--" onclick="pieceotherJsvar.setValue(pieceotherJsvar.getValue()-1)"></w:button>
							<w:numberField id="pieceother" jsvar="pieceotherJsvar" selectOnFocus="true"  allowNegative="false" style="text-align: right;background-color: #FFFFC7;background-image:none;" width="50"/>
							<w:button value="+" onclick="pieceotherJsvar.setValue(pieceotherJsvar.getValue()+1)"></w:button>
						</layout:panelGrid>
					</layout:cell>
					<h:outputLabel value="#{l.m['截关日']}"></h:outputLabel>
					<w:dateField id="cls" width="90" selectOnFocus="true" style="background-color: #FFFFC7;background-image:none;" ></w:dateField>
					<h:outputLabel value="ETD"></h:outputLabel>
					<w:dateField id="etd" width="90" selectOnFocus="true" style="background-color: #FFFFC7;background-image:none;" ></w:dateField>
					<h:outputLabel value="#{l.m['驳船']}CLG"></h:outputLabel>
					<w:dateField id="bargecls" width="90" selectOnFocus="true"></w:dateField>
					<h:outputLabel value="#{l.m['驳船']}ETD"></h:outputLabel>
					<w:dateField id="bargeetd" width="90" selectOnFocus="true"></w:dateField>
					<h:outputLabel value="GATE IN"></h:outputLabel>
					<w:dateField id="dategatein" width="90" selectOnFocus="true"/>
				</layout:panelGrid>

				<layout:panelGrid id="chooseJobsInfo" columns="2" >
					<h:outputLabel value="#{l.m['工作单日期']}"></h:outputLabel>
					<w:dateField id="jobdate" jsvar="etdJsVar" width="90" selectOnFocus="true"></w:dateField>
					<h:outputLabel value="#{l.m['接单公司']}" />
					<w:combo id="corpid" jsvar="corpidJsVar" width="90" forceSelection="true" listWidth="130" editable="true">
						<f:selectItems value="#{comboxBean.company}" />
					</w:combo>
					<h:outputLabel value="#{l.m['操作公司']}"/>
					<w:combo id="corpidop" jsvar="corpidopJsVar" width="90" forceSelection="true" listWidth="130" editable="true">
						<f:selectItems value="#{comboxBean.opCompany}" />
					</w:combo>
				</layout:panelGrid>

				<w:button id="createJobs" jsvar="createJobsJs" label="#{l.m['生成工作单']}" width="25" image="#{constantBean.contextPath}/images/new.png" />
				<w:button id="createPriceJobs" jsvar="createPriceJobsJs" label="#{l.m['生成报价单']}" width="25" image="#{constantBean.contextPath}/images/new.png" />
				<w:textField id="polGridSelect" jsvar="polGridSelectJsVar" width="90" hidden="true"></w:textField>
				</w:form>
			</layout:panel>
	</layout:window>

	<layout:window maximizable="false" width="500" height="500" id="priceJobAskWindow" resizable="true"
		title="#{l.m['询盘']}">
		<layout:panel id="priceAskPanel" height="300" hideBorders="true" style="font-size:12px"
			region="center">
			<w:form>
				<w:toolBar>
					<w:button id="savePriceJobs" value="#{l.m['发送']}" image="#{constantBean.contextPath}/images/save.png" />
				</w:toolBar>
				<layout:panelGrid columns="2" cellspacing="5px" style="font-size:12px">
					<h:outputLabel value="#{l.m['起运港']}" />
					<w:textField id="askPol" value="#{pages.module.price.qryfclBean.askPol}"
						selectOnFocus="true" height="20" width="100"  jsvar="askPolJS" readOnly="true"/>
					<h:outputLabel value="#{l.m['目的港']}" />
					<w:textField id="askPod" value="#{pages.module.price.qryfclBean.askPod}"
						selectOnFocus="true" height="20" width="100"  jsvar="askPodJS" readOnly="true"/>
					<h:outputLabel value="#{l.m['船公司']}" />
					<w:textField id="askCarrier" value="#{pages.module.price.qryfclBean.askCarrier}"
						selectOnFocus="true" height="20" width="100" jsvar="askCarrierJS" readOnly="true"/>
					<h:outputLabel value="#{l.m['询盘人']}" />
					<w:textField selectOnFocus="true" width="150"
						   value="#{pages.module.price.qryfclBean.asker}" id="asker" jsvar="askerJs" readOnly="true"/>
					<h:outputLabel value="#{l.m['复盘人']}" />
					<w:textField selectOnFocus="true" width="150"
						   value="#{pages.module.price.qryfclBean.reasker}" id="reasker" jsvar="reaskerJs" readOnly="true"/>
					<h:outputLabel value="20GP" />
					<w:numberField selectOnFocus="true" width="150"
						   value="#{pages.module.price.qryfclBean.cost20}" id="cost20" jsvar="cost20Js" readOnly="true"/>
					<h:outputLabel value="40GP" />
					<w:numberField selectOnFocus="true" width="150"
						   value="#{pages.module.price.qryfclBean.cost40gp}" id="cost40gp" jsvar="cost40gpJs" readOnly="true"/>
					<h:outputLabel value="40HQ" />
					<w:numberField selectOnFocus="true" width="150"
						   value="#{pages.module.price.qryfclBean.cost40hq}" id="cost40hq" jsvar="cost40hqJs" readOnly="true"/>
					<h:outputLabel value="45HQ" />
					<w:numberField selectOnFocus="true" width="150"
						   value="#{pages.module.price.qryfclBean.cost45hq}" id="cost45hq" jsvar="cost45hqJs" readOnly="true"/>
					<h:outputLabel value="#{l.m['备注']}" />
					<w:textArea value="#{pages.module.price.qryfclBean.remarks}"
						selectOnFocus="true" height="100" width="300" />
				</layout:panelGrid>
				<w:textField selectOnFocus="true" id="pkVal" hidden="true" />
			</w:form>
		</layout:panel>
	</layout:window>

	<layout:window title="#{l.m['提示']}" width="400"  jsvar="remarkWindow" height="350"
		header="false" resizable="true" constrainHeader="true">
		<layout:panel jsvar="tipsPanel" id="tipsPanel" border="false" hideBorders="true">
			<w:textArea id="tipsTextArea" jsvar="tipsTextArea" width="390" height="345" selectOnFocus="true"></w:textArea>
		</layout:panel>
	</layout:window>

	<script type="text/javascript" src="qryfcl.js?t=1"></script>
	<script type="text/javascript" src="watermark.js?t=1"></script>

	<script>

        watermark({"watermark_txt": "#{pages.module.price.qryfclBean.username}" + " " + "#{pages.module.price.qryfclBean.mobilephone}"});

		 //<![CDATA[
		function formatRemark(v,m,r) {
		  	var temp = "";
		  	if(v==null)return "";
		  	var f = "showRemark('"+v+"')";
				temp = '<a target="" onclick="'+f+'" href="javascript:void(0);"><font color="blue">' + v + '</font></a>';
		       return temp;
		}

		function showRemark(v){
		   	remarkWindow.show();
		   	$("#tipsTextArea").css("display","block");
		   	tipsTextArea.setValue(v);
		}

		function formatLinkEdit(v,m,r) {
	    	var pkid = r.get('id');
	    	var temp = '<a style="color:#00F;" onclick="showEdit('+pkid+')">#{l.m['明细']}</a>';
            return temp;
        }

        function formatcolor(v,m,r) {
	    	if(v =="true" ||v ==true ){
				v = "<image src='/scp/images/redflag.png' /><font color='red'>主推</font>";
			}else{
				v = "";
			}
            return v;
        }

        function formateType(v,m,r){
	    	var starton = r.get('typestart2');
	    	var startbaron = r.get('bartypestart2');

			if(v =='CLS'){
				v = "#{l.m['大船截关']}";
			}else if(v =='BETD'){
				v = "#{l.m['大船驳船']}ON BOARD";
			}else if(v =='ETD'){
				if(starton =='A'){
					v = "#{l.m['大船']}ON BOARD" +"<br/>"+ "#{l.m['(按大船ATD计价格)']}";
				}else if(starton =='B'){
					v = "#{l.m['大船']}ON BOARD" +"<br/>"+ "#{l.m['(按SO上的大船ETD计价格)']}";
				}else if(starton =='C'){
					v = "#{l.m['大船']}ON BOARD" +"<br/>"+ "#{l.m['(按提单ON BOARD计价格)']}";
				}else if(starton =='D'){
					v = "#{l.m['大船']}ON BOARD" +"<br/>"+ "#{l.m['(按船期表上的ETD计价格)']}";
				}else if(starton =='E'){
					v = "#{l.m['大船']}ON BOARD" +"<br/>"+ "#{l.m['(按大船LTD计价格)']}";
				}else{
					v = "#{l.m['大船']}ON BOARD";
				}

			}else if(v =='TDETD'){
				v = "#{l.m['提单']}ON BOARD";
			}else if(v =='BCETD'){
				if(startbaron =='A'){
					v = "#{l.m['驳船']}ON BOARD" +"<br/>"+ "#{l.m['(按驳船ATD计价格)']}";
				}else if(startbaron =='B'){
					v = "#{l.m['驳船']}ON BOARD" +"<br/>"+ "#{l.m['(按SO上的驳船ETD计价格)']}";
				}else if(startbaron =='C'){
					v = "#{l.m['驳船']}ON BOARD" +"<br/>"+ "#{l.m['(按提单ON BOARD计价格)']}";
				}else{
					v = "#{l.m['驳船']}ON BOARD";
				}
			}else if(v =='ONBOARD'){
				if(startbaron =='A'){
					v = "#{l.m['驳船']}ON BOARD" +"<br/>"+ "#{l.m['(按驳船ATD计价格)']}";
				}else if(startbaron =='B'){
					v = "#{l.m['驳船']}ON BOARD" +"<br/>"+ "#{l.m['(按SO上的驳船ETD计价格)']}";
				}else if(startbaron =='C'){
					v = "#{l.m['驳船']}ON BOARD" +"<br/>"+ "#{l.m['(按提单ON BOARD计价格)']}";
				}else{
					v = "#{l.m['驳船']}ON BOARD";
				}
			}else if(v =='SOETD'){
				v = "SO ETD";
			}else if(v =='GATE'){
				v = "GATE IN";
			}
	        return v;
		}



		function formateTypeend(v,m,r){
	    	var endon = r.get('typeend2');
	    	var endbaron = r.get('bartypeend2');

			if(v =='CLS'){
				v = "#{l.m['大船截关']}";
			}else if(v =='BETD'){
				v = "#{l.m['大船驳船']}ON BOARD";
			}else if(v =='ETD'){
				if(endon =='A'){
					v = "#{l.m['大船']}ON BOARD" +"<br/>"+ "#{l.m['(按大船ATD计价格)']}";
				}else if(endon =='B'){
					v = "#{l.m['大船']}ON BOARD" +"<br/>"+ "#{l.m['(按SO上的大船ETD计价格)']}";
				}else if(endon =='C'){
					v = "#{l.m['大船']}ON BOARD" +"<br/>"+ "#{l.m['(按提单ON BOARD计价格)']}";
				}else if(endon =='D'){
					v = "#{l.m['大船']}ON BOARD" +"<br/>"+ "#{l.m['(按船期表上的ETD计价格)']}";
				}else if(endon =='E'){
					v = "#{l.m['大船']}ON BOARD" +"<br/>"+ "#{l.m['(按大船LTD计价格)']}";
				}else{
					v = "#{l.m['大船']}ON BOARD";
				}

			}else if(v =='TDETD'){
				v = "#{l.m['提单']}ON BOARD";
			}else if(v =='BCETD'){
				if(endbaron =='A'){
					v = "#{l.m['驳船']}ON BOARD" +"<br/>"+ "#{l.m['(按驳船ATD计价格)']}";
				}else if(endbaron =='B'){
					v = "#{l.m['驳船']}ON BOARD" +"<br/>"+ "#{l.m['(按SO上的驳船ETD计价格)']}";
				}else if(endbaron =='C'){
					v = "#{l.m['驳船']}ON BOARD" +"<br/>"+ "#{l.m['(按提单ON BOARD计价格)']}";
				}else{
					v = "#{l.m['驳船']}ON BOARD";
				}

			}else if(v =='ONBOARD'){
				if(endbaron =='A'){
					v = "#{l.m['驳船']}ON BOARD" +"<br/>"+ "#{l.m['(按驳船ATD计价格)']}";
				}else if(endbaron =='B'){
					v = "#{l.m['驳船']}ON BOARD" +"<br/>"+ "#{l.m['(按SO上的驳船ETD计价格)']}";
				}else if(endbaron =='C'){
					v = "#{l.m['驳船']}ON BOARD" +"<br/>"+ "#{l.m['(按提单ON BOARD计价格)']}";
				}else{
					v = "#{l.m['驳船']}ON BOARD";
				}
			}else if(v =='SOETD'){
				v = "SO ETD";
			}else if(v =='GATE'){
				v = "GATE IN";
			}
	        return v;
		}


        function formatLocalcharge(v,m,r) {
        	var uuid = r.get('uuid');
        	var priceid = uuid.split("-")[0];
        	var bargeid = uuid.split("-")[1];
        	if(v == null || v == ''){
				v = "#{l.m['查看']}";
        	}
            temp = '<a target="tipsIFrame" onclick="tipsWindow.show();" href="localcharge.xhtml?src=query&linkid='+priceid+'&bargeid='+bargeid+'"><font color="blue">' + v + '</font></a>';
		 	return temp;
        }


		Ext.onReady(function(){
			gridJsvar.on('sortchange', sortAction);
			resize();
			Ext.EventManager.onWindowResize(function(){
				resize();
			});
			init();
			initFlexBox(
						"#{pages.module.price.qryfclBean.pol}",
						"#{pages.module.price.qryfclBean.pod}",
						"#{pages.module.price.qryfclBean.userid}"
						);
	     });


		function checkBefore1(){
			var polValue = polJsvar.getValue();
			if(polValue == undefined || polValue == ''){
				alert('POL is NULL!');
				return false;
			}
			var podValue = podJsvar.getValue();
			if(podValue == undefined || podValue == ''){
				alert('POD is NULL!');
				return false;
			}
			createJobsWindowJsVar.setTitle("#{l.m['生成工作单']}");
			createPriceJobsJs.hide();
			createJobsJs.show();
			return true;
		}

		function checkBefore2(){
			var polValue = polJsvar.getValue();
			if(polValue == undefined || polValue == ''){
				alert('POL is NULL!');
				return false;
			}
			var podValue = podJsvar.getValue();
			if(podValue == undefined || podValue == ''){
				alert('POD is NULL!');
				return false;
			}
			createJobsWindowJsVar.setTitle("#{l.m['生成报价单']}");
			createJobsJs.hide();
			createPriceJobsJs.show();
			return true;
		}

		function showHistory(){
			if(isShowHistoryJsVar.getValue() == true){
				$('table[id*=historyPanel]').css('visibility','visible');
			}else{
				$('table[id*=historyPanel]').css('visibility','hidden');
			}
		}


	  	$('#priceuser').flexbox('/scp/service?src=flexbox&action=priceuser', {
			resultTemplate: '<div class="col1">{name}</div><div class="col2">{namee}</div><div class="col3">{namec}</div>',
			watermark: '',
			initialValue: "#{pages.module.price.qryfclBean.priceuser}",
			width: 117,
			onSelect: function() {
				var id=$(this).next().next().children().children(".row.ffb-sel").attr("id");
				priceuseridJs.setValue(id);
				var str1 = $(this).next().next().children().children(".row.ffb-sel").children(".col1").html();
				str1 = str1.replace('<span class="ffb-match">',"");
				str1 = str1.replace("</span>","");
				var str3 = $(this).next().next().children().children(".row.ffb-sel").children(".col3").html();
				str3 = str3.replace('<span class="ffb-match">',"");
				str3 = str3.replace("</span>","");
				$(this).val(str3!=null&&str3!=''?str3:str1);
			}
		});
	     	 //]]>
</script>
</f:view>